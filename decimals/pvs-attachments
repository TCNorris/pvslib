(decimals:define-decimal-formatter d (:round-magnitude -6))

(defattach |decimalstr.decstr2rat| (s)
  "Converts string representing a decimal number to rational number"
  (decimals:parse-decimal-number s))

(defattach |decimalstr.rat2decstr| (x precision)
  "Converts rational number to string representing decimal number using precision"
  (multiple-value-bind (s r)
      (decimals:format-decimal-number (rational x) :round-magnitude (- precision))
    s))

